{"version":3,"file":"index.js","sources":["../src/js/home/pixabay-api.js","../src/js/home/render.js","../src/js/home/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL2 = 'https://api.themoviedb.org/3';\nconst END_POINT2 = '/trending/movie/day';\nconst API_KEY2 = '3305064ea972acdb0e395953537191ad';\n\nexport async function fetchMoviesHome(page = 1) {\n  try {\n    const { data } = await axios(`${BASE_URL2}${END_POINT2}`, {\n      params: {\n        api_key: API_KEY2,\n        page,\n      },\n    });\n    console.log(data); // Додайте це, щоб побачити відповідь\n    return data;\n  } catch (error) {\n    console.error('Помилка під час запиту:', error.message);\n    throw error;\n  }\n}\n","export function createMarkupHome(movies) {\n  return movies\n    .map(\n      ({ poster_path, original_title, id }) => `\n      <li class=\" movie-card-home\">\n\n           <img class=\"poster-home\" src=\"https://image.tmdb.org/t/p/w500/${poster_path}\" alt=\"${original_title}\">\n           <div class=\"movie-info-home\">\n               <h3 class=\"name-movie-home text-muvie-js\">${original_title}</h3>\n\n           </div>\n           <button class=\"learn-more-button-home\" data-id=\"${id}\">Learn more</button>\n\n      </li>`\n    )\n    .join('');\n}\n\nexport function modalMarkupHome({\n  poster_path,\n  release_date,\n  original_title,\n  vote_average,\n  overview,\n}) {\n  return `\n      <div class=\"modal-title-movie\">\n        <button class=\"modal-close\">x</button>\n        <div class=\"modal-content\">\n          <img class=\"img-modal\" src=\"https://image.tmdb.org/t/p/w500/${poster_path}\" alt=\"${original_title}\">\n          <div class=\"container-title-modal\">\n            <h2>${original_title}</h2>\n            <p>${overview}</p>\n            <p><strong>Release date:</strong> ${release_date}</p>\n            <p><strong>Rating: </strong> ${vote_average}</p>\n          </div>\n        </div>\n      </div>\n    \n    `;\n}\n","import { fetchMoviesHome } from './pixabay-api';\nimport { createMarkupHome, modalMarkupHome } from './render';\nimport '../../css/styles.css';\n\nconst containerMowieHome = document.querySelector('.gallery-top-movie-js');\n\nfunction truncateText(element, maxLength = 20) {\n  const textContent = element.textContent;\n  if (textContent.length > maxLength) {\n    element.textContent = textContent.slice(0, maxLength) + '...';\n  }\n}\n\nasync function renderMovieHome(page) {\n  try {\n    const data = await fetchMoviesHome(page);\n\n    containerMowieHome.insertAdjacentHTML(\n      'beforeend',\n      createMarkupHome(data.results)\n    );\n\n    // Викликаємо truncateText для текстових елементів\n    const textElements = document.querySelectorAll('.text-muvie-js');\n    textElements.forEach(element => truncateText(element, 18));\n  } catch (error) {\n    alert(error.message);\n  }\n}\n\nrenderMovieHome();\n\nconst modalContainerHome = document.querySelector('.modal-overlay');\n\nexport function fetchMoviIdHome(movieId) {\n  const options = {\n    method: 'GET',\n    headers: {\n      accept: 'application/json',\n      Authorization:\n        'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzMzA1MDY0ZWE5NzJhY2RiMGUzOTU5NTM1MzcxOTFhZCIsIm5iZiI6MTczMTk2NDMxNy4yNzI0ODUsInN1YiI6IjY3MmUxNDJiYTgxODcxM2JkZjQ5NDliNSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.ujyy7e_t_8kU-Sxr8b1pFxTDQi8zc-bo3UZcavZtmkA',\n    },\n  };\n\n  fetch(`https://api.themoviedb.org/3/movie/${movieId}`, options)\n    .then(res => res.json())\n    .then(res => {\n      modalContainerHome.innerHTML = modalMarkupHome(res);\n      console.log(res);\n\n      // Додаємо обробник для кнопки закриття\n      const closeButton = modalContainerHome.querySelector('.modal-close');\n      closeButton.addEventListener('click', () => {\n        modalContainerHome.classList.add('modall-hiden');\n      });\n\n      // Додаємо обробник для кліку на фон\n      modalContainerHome.addEventListener('click', evt => {\n        if (evt.target === modalContainerHome) {\n          modalContainerHome.classList.add('modall-hiden');\n        }\n      });\n    })\n    .catch(error => {\n      console.error('Помилка під час запиту:', error.message);\n      throw error;\n    });\n}\n\ncontainerMowieHome.addEventListener('click', onLearnMoreClick);\n\nfunction onLearnMoreClick(evt) {\n  const button = evt.target.closest('.learn-more-button-home');\n  console.log(button);\n  if (!button) return;\n  const movieId = button.dataset.id;\n  modalContainerHome.innerHTML = '';\n  modalContainerHome.classList.remove('modall-hiden');\n  fetchMoviIdHome(movieId);\n  console.log(movieId);\n}\n"],"names":["BASE_URL2","END_POINT2","API_KEY2","fetchMoviesHome","page","data","axios","error","createMarkupHome","movies","poster_path","original_title","id","modalMarkupHome","release_date","vote_average","overview","containerMowieHome","truncateText","element","maxLength","textContent","renderMovieHome","modalContainerHome","fetchMoviIdHome","movieId","options","res","evt","onLearnMoreClick","button"],"mappings":"sHAEA,MAAMA,EAAY,+BACZC,EAAa,sBACbC,EAAW,mCAEV,eAAeC,EAAgBC,EAAO,EAAG,CAC9C,GAAI,CACF,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAM,GAAGN,CAAS,GAAGC,CAAU,GAAI,CACxD,OAAQ,CACN,QAASC,EACT,KAAAE,CACD,CACP,CAAK,EACD,eAAQ,IAAIC,CAAI,EACTA,CACR,OAAQE,EAAO,CACd,cAAQ,MAAM,0BAA2BA,EAAM,OAAO,EAChDA,CACP,CACH,CCpBO,SAASC,EAAiBC,EAAQ,CACvC,OAAOA,EACJ,IACC,CAAC,CAAE,YAAAC,EAAa,eAAAC,EAAgB,GAAAC,CAAI,IAAK;AAAA;AAAA;AAAA,2EAG4BF,CAAW,UAAUC,CAAc;AAAA;AAAA,2DAEnDA,CAAc;AAAA;AAAA;AAAA,6DAGZC,CAAE;AAAA;AAAA,YAG1D,EACA,KAAK,EAAE,CACZ,CAEO,SAASC,EAAgB,CAC9B,YAAAH,EACA,aAAAI,EACA,eAAAH,EACA,aAAAI,EACA,SAAAC,CACF,EAAG,CACD,MAAO;AAAA;AAAA;AAAA;AAAA,wEAI+DN,CAAW,UAAUC,CAAc;AAAA;AAAA,kBAEzFA,CAAc;AAAA,iBACfK,CAAQ;AAAA,gDACuBF,CAAY;AAAA,2CACjBC,CAAY;AAAA;AAAA;AAAA;AAAA;AAAA,KAMvD,CCpCA,MAAME,EAAqB,SAAS,cAAc,uBAAuB,EAEzE,SAASC,EAAaC,EAASC,EAAY,GAAI,CAC7C,MAAMC,EAAcF,EAAQ,YACxBE,EAAY,OAASD,IACvBD,EAAQ,YAAcE,EAAY,MAAM,EAAGD,CAAS,EAAI,MAE5D,CAEA,eAAeE,EAAgBlB,EAAM,CACnC,GAAI,CACF,MAAMC,EAAO,MAAMF,EAAgBC,CAAI,EAEvCa,EAAmB,mBACjB,YACAT,EAAiBH,EAAK,OAAO,CACnC,EAGyB,SAAS,iBAAiB,gBAAgB,EAClD,QAAQc,GAAWD,EAAaC,EAAS,EAAE,CAAC,CAC1D,OAAQZ,EAAO,CACd,MAAMA,EAAM,OAAO,CACpB,CACH,CAEAe,IAEA,MAAMC,EAAqB,SAAS,cAAc,gBAAgB,EAE3D,SAASC,EAAgBC,EAAS,CACvC,MAAMC,EAAU,CACd,OAAQ,MACR,QAAS,CACP,OAAQ,mBACR,cACE,4PACH,CACL,EAEE,MAAM,sCAAsCD,CAAO,GAAIC,CAAO,EAC3D,KAAKC,GAAOA,EAAI,MAAM,EACtB,KAAKA,GAAO,CACXJ,EAAmB,UAAYV,EAAgBc,CAAG,EAClD,QAAQ,IAAIA,CAAG,EAGKJ,EAAmB,cAAc,cAAc,EACvD,iBAAiB,QAAS,IAAM,CAC1CA,EAAmB,UAAU,IAAI,cAAc,CACvD,CAAO,EAGDA,EAAmB,iBAAiB,QAASK,GAAO,CAC9CA,EAAI,SAAWL,GACjBA,EAAmB,UAAU,IAAI,cAAc,CAEzD,CAAO,CACP,CAAK,EACA,MAAMhB,GAAS,CACd,cAAQ,MAAM,0BAA2BA,EAAM,OAAO,EAChDA,CACZ,CAAK,CACL,CAEAU,EAAmB,iBAAiB,QAASY,CAAgB,EAE7D,SAASA,EAAiBD,EAAK,CAC7B,MAAME,EAASF,EAAI,OAAO,QAAQ,yBAAyB,EAE3D,GADA,QAAQ,IAAIE,CAAM,EACd,CAACA,EAAQ,OACb,MAAML,EAAUK,EAAO,QAAQ,GAC/BP,EAAmB,UAAY,GAC/BA,EAAmB,UAAU,OAAO,cAAc,EAClDC,EAAgBC,CAAO,EACvB,QAAQ,IAAIA,CAAO,CACrB"}